const d=document.querySelector(".js__list_all"),i=document.querySelector(".js__list_favourites"),L=document.querySelector(".js__input_search"),y=document.querySelector(".js__button_search"),p=document.querySelector(".js__reset");let l=[],s=[],u=[];const _=JSON.parse(localStorage.getItem("favourites"));k();j();y.addEventListener("click",S);p.addEventListener("click",g);function S(e){e.preventDefault();let t=L.value;fetch(`//api.disneyapi.dev/character?name=${t}`).then(a=>a.json()).then(a=>{if(d.innerHTML="",Array.isArray(a.data)){u=a.data;for(const r of u)n(r),o(r)}else n(a.data),o(a.data)})}function C(e){const t=e.currentTarget;f(t)}function q(e){const t=e.currentTarget.parentNode.parentNode;f(t);const a=parseInt(t.dataset.id);d.querySelector(`[data-id="${a}"]`).querySelector(".characters__card").classList.remove("favourite")}function g(){i.innerHTML="",s=[],localStorage.setItem("favourites",JSON.stringify(s));const e=document.querySelectorAll(".characters__card");for(const t of e)t.classList.remove("favourite")}function f(e){const t=parseInt(e.dataset.id),a=e.querySelector(".characters__card");let r;fetch(`//api.disneyapi.dev/character/${t}`).then(c=>c.json()).then(c=>{r=c.data,F(a,r)})}function j(){fetch("//api.disneyapi.dev/character?pageSize=50").then(e=>e.json()).then(e=>{l=e.data;for(const t of l)n(t),o(t)})}function n(e){d.appendChild(h(e));const t=document.querySelectorAll(".js__character__card");for(const a of t)a.closest(".js__list_favourites")||(a.addEventListener("click",C),a.classList.add("clickable"))}function h(e){const t=document.createElement("li");return t.setAttribute("data-id",e._id),t.setAttribute("data-name",e.name),t.classList.add("js__character__card"),t.insertAdjacentHTML("afterbegin",`<div class="characters__card"><h3 class="characters__card__close js__card__close"></h3><img class="characters__card__img" src="${e.imageUrl?e.imageUrl:"https://via.placeholder.com/120x120/cfe2f3/351c75/?text=Disney"}" alt="Picture of ${e.name}"><h3 class="characters__card__name js__card__name">${e.name}</h3></div>`),t}function k(){if(_!==null)for(const e of _)v(e)}function F(e,t){const a=i.querySelector(`[data-id="${t._id}"]`);!e.classList.contains("favourite")&&!a&&e.closest(".js__list_all")?(e.classList.add("favourite"),v(t)):!e.classList.contains("favourite")&&a&&e.closest(".js__list_all")?e.classList.add("favourite"):(e.classList.remove("favourite"),a&&(i.removeChild(a),s=s.filter(r=>r._id!==t._id))),localStorage.setItem("favourites",JSON.stringify(s))}function v(e){const t=h(e),a=t.querySelector(".js__card__name"),r=document.createTextNode("üòª");a.appendChild(r);const c=t.querySelector(".js__card__close"),m=document.createTextNode("‚ùå");c.appendChild(m),c.classList.add("clickable"),c.addEventListener("click",q),i.appendChild(t),s.push(e)}function o(e){if(i.querySelector(`[data-id="${e._id}"]`)){const a=document.querySelector(`[data-id="${e._id}"]`);a&&a.querySelector(".characters__card").classList.add("favourite")}}
//# sourceMappingURL=main.js.map
